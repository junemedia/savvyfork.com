var ceMap={mapCanvas:null,dirContainer:null,mapInUse:!1,companyPos:null,lat:40,lng:-100,zoom:8,travelMode:"DRIVING",companyMarker:null,markerImage:null,markerShadow:null,companyImage:null,companyShadow:null,infowindow:null,infoWindowDisplay:"alwaysOn",mapTypeControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,navigationControl:!0,scrollwheel:!0,reverseGeocode:!1,appendToSearch:"",dirService:null,dirRenderer:null,map:null,destination:null,geocoder:new google.maps.Geocoder,input:{highways:null,tolls:null,address:null,lat:null,lng:null,travelMode:null,zoom:null},lang:{directionsFailed:"Directions failed",geocodeError:"Geocode was not successful for the following reason",showIPBasedLocation:"Show IP-Based Location",address:"Address"},getMarkerImage:function(a,b){a&&(ceMap.companyImage=new google.maps.MarkerImage(a)),b&&(ceMap.companyMarker=new google.maps.MarkerImage(b))},showDirections:function(a,b){if(b!=google.maps.DirectionsStatus.OK){alert(ceMap.lang.directionsFailed+": "+b);return}ceMap.dirRenderer.setMap(ceMap.map),ceMap.dirRenderer.setPanel(ceMap.dirContainer),ceMap.dirRenderer.setDirections(a)},getSelectedTravelMode:function(){return ceMap.travelMode=="show_option"&&ceMap.input.travelMode?ceMap.input.travelMode.getSelected().get("value"):ceMap.travelMode=="DRIVING"||ceMap.travelMode=="BICYCLING"||ceMap.travelMode=="WALKING"?ceMap.travelMode:"DRIVING"},getDirections:function(){ceMap.mapInUse&&ceMap.reset(),ceMap.mapInUse=!0,ceMap.dirService=new google.maps.DirectionsService,ceMap.dirRenderer=new google.maps.DirectionsRenderer,ceMap.dirContainer=document.id("ce-directionsPanel");var a={origin:ceMap.input.address.getProperty("value"),destination:ceMap.destination,travelMode:ceMap.getSelectedTravelMode(),provideRouteAlternatives:!0,avoidHighways:ceMap.input.highways.checked,avoidTolls:ceMap.input.tolls.checked};ceMap.dirService.route(a,ceMap.showDirections)},reset:function(){if(!ceMap.mapInUse)return!1;ceMap.init(),ceMap.dirRenderer.setMap(null),ceMap.dirRenderer.setPanel(null),ceMap.dirRenderer=new google.maps.DirectionsRenderer,ceMap.dirRenderer.setMap(ceMap.map),ceMap.dirRenderer.setPanel(ceMap.dirContainer)},init:function(){ceMap.input.lat=document.id(ceMap.input.lat),ceMap.input.lng=document.id(ceMap.input.lng),ceMap.input.travelMode=document.id(ceMap.input.travelMode),ceMap.input.address=document.id(ceMap.input.address),ceMap.input.highways=document.id(ceMap.input.highways),ceMap.input.tolls=document.id(ceMap.input.tolls),ceMap.input.zoom=document.id(ceMap.input.zoom),ceMap.mapCanvas=document.id(ceMap.mapCanvas),ceMap.lat==40&&ceMap.lng==-100&&google.loader.ClientLocation&&(ceMap.lat=google.loader.ClientLocation.latitude,ceMap.lng=google.loader.ClientLocation.longitude,ceMap.infoWindowContent||(ceMap.infoWindowContent=ceMap.lang.showIPBasedLocation+": <br />"+"<b>"+ceMap.getFormattedLocation()+"</b>"),ceMap.editMode&&(ceMap.input.lat.set("value",ceMap.lat),ceMap.input.lng.set("value",ceMap.lng)));var a=document.id(a);a&&google.loader.ClientLocation&&a.set("value",ceMap.getFormattedLocation()),ceMap.companyPos=new google.maps.LatLng(ceMap.lat,ceMap.lng),origin=ceMap.companyPos;var b={zoom:ceMap.zoom,center:origin,mapTypeControl:ceMap.typeControl,mapTypeId:ceMap.typeId,navigationControl:ceMap.navigationControl,scrollwheel:ceMap.scrollwheel};ceMap.map=new google.maps.Map(ceMap.mapCanvas,b),ceMap.companyMarker=new google.maps.Marker({position:ceMap.companyPos,map:ceMap.map,icon:ceMap.companyImage,shadow:ceMap.companyShadow,title:ceMap.mapTitle,draggable:ceMap.companyMarkerDraggable,zIndex:4}),ceMap.infowindow=new google.maps.InfoWindow({content:ceMap.infoWindowContent}),ceMap.infoWindowDisplay!="hide"&&google.maps.event.addListener(ceMap.companyMarker,"click",function(){ceMap.infowindow.open(ceMap.map,ceMap.companyMarker)}),ceMap.destination||(ceMap.destination=ceMap.companyPos),ceMap.companyMarkerDraggable&&(google.maps.event.addListener(ceMap.companyMarker,"drag",function(){ceMap.infowindow.close()}),google.maps.event.addListener(ceMap.companyMarker,"dragend",function(){ceMap.editMode&&(ceMap.input.lat.setProperty("value",ceMap.companyMarker.getPosition().lat()),ceMap.input.lng.setProperty("value",ceMap.companyMarker.getPosition().lng())),ceMap.infoWindowDisplay!="hide"&&ceMap.infowindow.open(ceMap.map,ceMap.companyMarker)})),ceMap.editMode&&google.maps.event.addListener(ceMap.map,"zoom_changed",function(){zoomLevel=ceMap.map.getZoom(),zoomLevel==0&&ceMap.map.setZoom(10),ceMap.input.zoom.setProperty("value",ceMap.map.getZoom())})},getFormattedLocation:function(){var a="";if(google.loader.ClientLocation.address.neighborhood)var a=google.loader.ClientLocation.address.neighborhood+", ";return google.loader.ClientLocation.address.region?a+google.loader.ClientLocation.address.city+", "+google.loader.ClientLocation.address.region.toUpperCase()+", "+google.loader.ClientLocation.address.country:a+google.loader.ClientLocation.address.city+", "+google.loader.ClientLocation.address.country},codeAddress:function(){var a=ceMap.input.address.get("value").clean(),b="";ceMap.geocoder.geocode({address:a+this.appendToSearch},function(b,c){c==google.maps.GeocoderStatus.OK?(ceMap.map.setCenter(b[0].geometry.location),ceMap.companyMarker.setPosition(b[0].geometry.location),ceMap.map.getZoom()<11&&ceMap.map.setZoom(15),ceMap.input.lat.setProperty("value",b[0].geometry.location.lat()),ceMap.input.lng.setProperty("value",b[0].geometry.location.lng()),ceMap.reverseGeocode?ceMap.getLocation(b[0].geometry.location):ceMap.infowindow.setContent(ceMap.input.address.get("value").clean())):alert(ceMap.lang.geocodeError+": "+c+"\n\n"+ceMap.lang.address+": "+a)}),ceMap.resize()},getLocation:function(a){ceMap.geocoder.geocode({location:a},function(a,b){b==google.maps.GeocoderStatus.OK&&(ceMap.input.address.set("value",a[0].formatted_address),ceMap.infowindow.setContent(ceMap.input.address.get("value").clean()))})},resize:function(){google.maps.event.trigger(ceMap.map,"resize"),ceMap.map.setZoom(ceMap.map.getZoom())}}